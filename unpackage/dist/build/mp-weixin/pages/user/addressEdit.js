(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/addressEdit"],{"07be":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;getApp();var n={data:function(){return{template:t.getStorageSync("__ddminiTemplateConfig"),region:["北京市","北京市","东城区"],addressData:{id:"",cname:"",phone:"",idcard:"",province:"",region_id:"110101",address:"",is_default:!0,latitude:"",longitude:""},editAddressStatus:!1}},onLoad:function(e){var n=this;e.id?(t.setNavigationBarTitle({title:"编辑地址"}),n.Get(n.Url.addressList,{id:e.id}).then((function(t){0===t.code&&(n.addressData=t.data[0],n.region=t.data[0].province.split(","))}))):t.setNavigationBarTitle({title:"添加地址"})},methods:{selectRegion:function(t){this.region=t.detail.value,this.addressData.region_id=t.detail.code[2]},getWechatAdds:function(){var e=this;t.chooseAddress({success:function(n){if("chooseAddress:ok"!=n.errMsg)return t.showToast({title:"获取地址失败",icon:"none"});e.addressData.cname=n.userName,e.addressData.phone=n.telNumber,e.addressData.address=n.detailInfo,e.region=[n.provinceName,n.cityName,n.countyName]},fail:function(e){return t.showToast({title:"获取地址失败",icon:"none"})}})},saveAddress:function(){var e=this,n=e.addressData;n.cname?n.phone?/^1[3456789]\d{9}$/.test(n.phone)?n.address?(n.is_default=!0,n.province=e.region.join(","),e.Post(e.Url.addressEdit,n).then((function(e){0==e.code?(t.showToast({title:"地址保存成功"}),setTimeout((function(){t.navigateBack()}),500)):t.showModal({content:e.mag,showCancel:!1})}))):t.showModal({title:"地址保存提示",content:"请输入详细的街道门牌信息",showCancel:!1}):t.showModal({title:"手机格式错误",content:"请输入正确的手机号码",showCancel:!1}):t.showModal({title:"提示",content:"请输入联系人手机",showCancel:!1}):t.showModal({title:"提示",content:"请输入联系人姓名",showCancel:!1})},delAddress:function(){var e=this;t.showModal({title:"删除地址",content:"地址删除后不可恢复，是否删除该地址？",success:function(n){n.confirm&&e.Get(e.Url.addressDel,{id:e.addressData.id}).then((function(e){0===e.code?(t.showToast({title:"地址删除成功"}),setTimeout((function(){t.navigateBack()}),500)):t.showModal({content:e.mag,showCancel:!1})}))}})},chooseLocationTap:function(){var e=this,n=e.addressData;t.chooseLocation({latitude:n.latitude||"",longitude:n.longitude||"",success:function(t){qqmapsdk.reverseGeocoder({location:{latitude:t.latitude,longitude:t.longitude},success:function(n){var a,o=t.address.split("区");if(1===o.length){var i=t.address.split("市");a=i[i.length-1]}else a=o[1];var s=n.result.ad_info;e.region=[s.province,s.city,s.district],e.addressData.region_id=s.adcode,e.addressData.address=a,e.addressData.latitude=t.latitude,e.addressData.longitude=t.longitude}})},fail:function(n){return e.editAddressStatus=!0,t.showToast({title:"选择位置失败，请手动输入",icon:"none"})}})}}};e.default=n}).call(this,n("543d")["default"])},"4a29":function(t,e,n){"use strict";(function(t){n("d37c");a(n("66fd"));var e=a(n("ec30"));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},8573:function(t,e,n){"use strict";var a=n("9480"),o=n.n(a);o.a},"92d2":function(t,e,n){"use strict";n.r(e);var a=n("07be"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},9480:function(t,e,n){},df21:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var a={uSwitch:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-switch/u-switch")]).then(n.bind(null,"7325"))}},o=function(){var t=this,e=t.$createElement;t._self._c},i=[]},ec30:function(t,e,n){"use strict";n.r(e);var a=n("df21"),o=n("92d2");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("8573");var s,d=n("f0c5"),c=Object(d["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);e["default"]=c.exports}},[["4a29","common/runtime","common/vendor"]]]);