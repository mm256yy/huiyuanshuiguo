(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/invoice_order"],{"1eb4":function(e,t,n){"use strict";var a=n("a934"),o=n.n(a);o.a},"3c5f":function(e,t,n){"use strict";n.r(t);var a=n("9a2a"),o=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t["default"]=o.a},8673:function(e,t,n){"use strict";var a;n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a}));var o=function(){var e=this,t=e.$createElement;e._self._c},r=[]},"86f3":function(e,t,n){"use strict";n.r(t);var a=n("8673"),o=n("3c5f");for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n("1eb4");var c,i=n("f0c5"),s=Object(i["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],c);t["default"]=s.exports},"8d2f":function(e,t,n){"use strict";(function(e){n("d37c");a(n("66fd"));var t=a(n("86f3"));function a(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},"9a2a":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={components:{},data:function(){return{template:e.getStorageSync("__ddminiTemplateConfig"),orderList:[],selectOrderIds:[],editStatus:!1,editData:{company_name:"",company_tax:"",company_address:"",company_phone:"",bank_name:"",bank_number:"",user_phone:"",user_email:"",order_list:"",remark:"",money:0}}},onLoad:function(){var e=this;e.getInvoiceassistantOrderList()},methods:{getInvoiceassistantOrderList:function(){var e=this,t={page:1,sizes:200};e.Get(e.Url.invoiceassistantOrderList,t).then((function(t){0===t.code&&(e.orderList=t.data.list)}))},selectOrderTap:function(e){var t=this,n=t.orderList[e];if(n.active=!n.active,t.$set(t.orderList,e,n),n.active)t.selectOrderIds.push(n.order_id);else{var a=t.selectOrderIds.findIndex((function(e){return e===n.order_id}));t.selectOrderIds.splice(a,1)}},uniqueSetArray:function(e){return Array.from(new Set(e))},importInvoiceDataTap:function(){var t=this;e.chooseInvoiceTitle({success:function(e){t.editData.company_name=e.title,t.editData.company_tax=e.taxNumber,t.editData.company_address=e.companyAddress,t.editData.company_phone=e.telephone,t.editData.bank_name=e.bankName,t.editData.bank_number=e.bankAccount}})},getInvoiceDataTap:function(){var t=this,n=t.editData;n.company_name?n.company_tax?n.user_phone||n.user_email?(n.order_list=t.selectOrderIds.join(","),console.log(n),t.Post(t.Url.invoiceassistantOrderApply,n).then((function(t){console.log(t),0===t.code?e.showModal({title:"提交成功",content:"开票申请已成功提交，财务人员将在收到申请后2个工作日内开具。",showCancel:!1,success:function(t){t.confirm&&e.navigateBack()}}):e.showModal({content:t.msg,showCancel:!1})}))):e.showModal({content:"联系手机或邮箱必填一个(用于接收发票)",showCancel:!1}):e.showModal({content:"请输入开票税号(统一社会信用代码)",showCancel:!1}):e.showModal({content:"请输入开票名称(单位或公司名称)",showCancel:!1})},getCheckOrderTap:function(){var t=this,n=0,a=[],o=0;t.orderList.forEach((function(e){e.active&&(o++,n+=e.order_total,a.push(e.order_id))})),t.selectOrderIds=a,e.showModal({title:"金额确认",content:"共选择："+o+"张订单\r\n合计金额："+n+"元\r\n确认开票请点击下一步",confirmText:"下一步",cancelColor:"#999",success:function(e){e.confirm&&(t.editData.money=n,t.editStatus=!0)}})}}};t.default=n}).call(this,n("543d")["default"])},a934:function(e,t,n){}},[["8d2f","common/runtime","common/vendor"]]]);