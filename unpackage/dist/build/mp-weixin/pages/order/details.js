(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/details"],{2130:function(e,t,n){"use strict";(function(e){n("d37c");o(n("66fd"));var t=o(n("89bd"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},"385a":function(e,t,n){},"73db":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={aicon:function(){return n.e("components/aicon/aicon").then(n.bind(null,"6387"))},uCountDown:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-count-down/u-count-down")]).then(n.bind(null,"a4f8"))},paypalType:function(){return n.e("components/paypalType/paypalType").then(n.bind(null,"1d56"))}},a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.orderDetail&&0===e.orderDetail.order_status?e.totalCountDown(e.orderDetail.close_time_stamp):null),o=e.orderDetail?e.__map(e.orderDetail.goods_list,(function(t,n){var o=e.__get_orig(t),a=t.goods_spec_name?e.specNameText(t.goods_spec_name):null;return{$orig:o,m1:a}})):null,a=e.orderDetail?e.provinceText(e.orderDetail.address_data.province):null;e._isMounted||(e.e0=function(t){e.paypalShow=!0},e.e1=function(t){e.paypalShow=!1}),e.$mp.data=Object.assign({},{$root:{m0:n,l0:o,m2:a}})},i=[]},"89bd":function(e,t,n){"use strict";n.r(t);var o=n("73db"),a=n("e855");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("99d7");var r,c=n("f0c5"),d=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);t["default"]=d.exports},"99d7":function(e,t,n){"use strict";var o=n("385a"),a=n.n(o);a.a},b69c:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;getApp();var n={data:function(){return{template:e.getStorageSync("__ddminiTemplateConfig"),id:"",orderDetail:"",paypalShow:"",userData:""}},onLoad:function(e){var t=this;t.id=e.id,t.getOrderDetail(),t.getUserInfo()},methods:{getUserInfo:function(){var e=this;e.Get(e.Url.userInfo).then((function(t){0===t.code&&(e.userData=t.data)}))},provinceText:function(e){if(e){var t=e.replace(/,/g,"");return t}},specNameText:function(e){var t=Object.keys(e),n="";return t.forEach((function(o,a){n+="".concat(e[o]).concat(a+1===t.length?"":",")})),n},totalCountDown:function(e){var t=(new Date).getTime();return e-t},getOrderDetail:function(){var t=this;e.showLoading({title:"订单加载中",mask:!0}),t.Get(t.Url.orderDetail,{id:t.id}).then((function(n){0===n.code?(e.hideLoading(),t.orderDetail=n.data):(e.hideLoading(),e.showModal({content:"订单已被删除，请重试",showCancel:!1,success:function(t){t.confirm&&e.navigateBack()}}))}))},getPaypalOrder:function(t){var n=this,o=n.orderDetail.id,a={pay_type:t,order_id:o,platform:1};e.showLoading({title:"支付准备中",mask:!0}),n.Get(n.Url.orderPaypal,a).then((function(t){0===t.code?(e.hideLoading(),e.requestPayment({provider:"wxpay",timeStamp:t.data.wechat.timeStamp,nonceStr:t.data.wechat.nonceStr,package:t.data.wechat.package,signType:t.data.wechat.signType,paySign:t.data.wechat.paySign,success:function(t){e.showToast({title:"微信支付成功"}),n.getOrderDetail()},fail:function(t){e.showModal({title:"支付失败",content:"订单支付失败，请重新进行支付。如针对订单金额有疑问请联系客服人员",showCancel:!1})}})):(e.hideLoading(),e.showModal({title:"支付失败",content:t.msg,showCancel:!1}))}))},confirmOrder:function(){var t=this,n=t.orderDetail.id;e.showLoading({title:"确认收货中",mask:!0}),t.Get(t.Url.orderConfirm,{id:n}).then((function(n){0===n.code?(e.hideLoading(),e.showToast({title:"确认收货成功"}),t.getOrderDetail()):(e.hideLoading(),e.showModal({title:"确认收货失败",content:n.msg,showCancel:!1}))}))},getOrderDel:function(){var t=this;e.showModal({title:"订单删除确认",content:"订单删除后不可恢复，是否继续删除？",success:function(n){if(n.confirm){var o=t.orderDetail.id;e.showLoading({title:"准备删除中",mask:!0}),t.Get(t.Url.orderDel,{id:o}).then((function(n){0===n.code?(e.hideLoading(),e.showToast({title:"订单删除成功"}),t.$nextTick((function(){e.navigateBack()}))):(e.hideLoading(),e.showModal({title:"订单删除失败",content:n.msg,showCancel:!1}))}))}}})}}};t.default=n}).call(this,n("543d")["default"])},e855:function(e,t,n){"use strict";n.r(t);var o=n("b69c"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a}},[["2130","common/runtime","common/vendor"]]]);