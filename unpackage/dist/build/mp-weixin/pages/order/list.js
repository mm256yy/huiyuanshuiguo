(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/list"],{"5b40":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return n}));var n={uCountDown:function(){return Promise.all([a.e("common/vendor"),a.e("node-modules/uview-ui/components/u-count-down/u-count-down")]).then(a.bind(null,"a4f8"))},paypalType:function(){return a.e("components/paypalType/paypalType").then(a.bind(null,"1d56"))}},o=function(){var e=this,t=e.$createElement,a=(e._self._c,e.__map(e.orderList,(function(t,a){var n=e.__get_orig(t),o=e.diaplayTime(t.create_time),r=e.__map(t.goods_list,(function(t,a){var n=e.__get_orig(t),o=e.specNameText(t.goods_spec_name);return{$orig:n,m1:o}})),i=0===t.order_status?e.totalCountDown(t.close_time_stamp):null;return{$orig:n,m0:o,l0:r,m2:i}})));e._isMounted||(e.e0=function(t,a){var n=arguments[arguments.length-1].currentTarget.dataset,o=n.eventParams||n["event-params"];a=o.item;t.stopPropagation(),e.paypalOrder=a.id,e.paypalShow=!0},e.e1=function(t){e.paypalShow=!1}),e.$mp.data=Object.assign({},{$root:{l1:a}})},r=[]},"6b52":function(e,t,a){"use strict";a.r(t);var n=a("e6ad"),o=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=o.a},"9bf2":function(e,t,a){"use strict";a.r(t);var n=a("5b40"),o=a("6b52");for(var r in o)"default"!==r&&function(e){a.d(t,e,(function(){return o[e]}))}(r);a("fcfc9");var i,d=a("f0c5"),s=Object(d["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);t["default"]=s.exports},a0b5:function(e,t,a){},e6ad:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;getApp();var a={data:function(){return{paypalShow:!1,userData:"",paypalOrder:"",template:e.getStorageSync("__ddminiTemplateConfig"),orderMenu:[{id:-1,name:"全部"},{id:0,name:"待支付"},{id:1,name:"待发货"},{id:2,name:"待收货"},{id:3,name:"已完成"}],orderActive:-1,orderPage:{page:1,sizes:10,total:0},orderList:[]}},onLoad:function(e){var t=this;e.status&&(t.orderActive=Number(e.status))},onShow:function(){var e=this;e.orderPage.page=1,e.orderList=[],e.getOrderList(),e.getUserInfo()},onReachBottom:function(){var e=this;e.orderPage.total>e.orderPage.page&&(e.orderPage.page++,e.getOrderList())},methods:{getUserInfo:function(){var e=this;e.Get(e.Url.userInfo).then((function(t){0===t.code&&(e.userData=t.data)}))},specNameText:function(e){if(e){var t=Object.keys(e),a="";return t.forEach((function(n,o){a+="".concat(e[n]).concat(o+1===t.length?"":",")})),a}},totalCountDown:function(e){var t=(new Date).getTime();return e-t},getOrderList:function(){var e=this,t={order_type:1,status:e.orderActive,page:e.orderPage.page,sizes:e.orderPage.sizes};e.Get(e.Url.orderList,t).then((function(t){if(0===t.code){e.orderPage.total=t.data.page;var a=t.data.list;if(e.orderList.length>0){var n=e.orderList.concat(a);e.orderList=n}else e.orderList=a}}))},selectMenuTap:function(e){var t=this;t.orderActive=e,t.orderPage.page=1,t.orderList=[],t.getOrderList()},getPaypalOrder:function(t){var a=this,n={pay_type:t,order_id:a.paypalOrder,platform:1};e.showLoading({title:"支付准备中",mask:!0}),a.Get(a.Url.orderPaypal,n).then((function(t){0===t.code?(e.hideLoading(),e.requestPayment({provider:"wxpay",timeStamp:t.data.wechat.timeStamp,nonceStr:t.data.wechat.nonceStr,package:t.data.wechat.package,signType:t.data.wechat.signType,paySign:t.data.wechat.paySign,success:function(t){e.showToast({title:"微信支付成功"}),a.orderPage.page=1,a.orderList=[],a.getOrderList()},fail:function(t){e.showModal({title:"支付失败",content:"订单支付失败，请重新进行支付。如针对订单金额有疑问请联系客服人员",showCancel:!1})}})):(e.hideLoading(),e.showModal({title:"支付失败",content:t.msg,showCancel:!1}))}))},getOrderDel:function(t){var a=this;e.showModal({title:"订单删除确认",content:"订单删除后不可恢复，是否继续删除？",success:function(n){if(n.confirm){var o=a.orderList[t].id;e.showLoading({title:"准备删除中",mask:!0}),a.Get(a.Url.orderDel,{id:o}).then((function(n){0===n.code?(e.hideLoading(),e.showToast({title:"订单删除成功"}),a.orderList.splice(t,1)):(e.hideLoading(),e.showModal({title:"订单删除失败",content:n.msg,showCancel:!1}))}))}}})},confirmOrder:function(t){var a=this;e.showLoading({title:"确认收货中",mask:!0}),a.Get(a.Url.orderConfirm,{id:t}).then((function(t){0===t.code?(e.hideLoading(),e.showToast({title:"确认收货成功"}),a.orderPage.page=1,a.orderList=[],a.getOrderList()):(e.hideLoading(),e.showModal({title:"确认收货失败",content:t.msg,showCancel:!1}))}))},getDetailsTap:function(t){e.navigateTo({url:"/pages/order/details?id=".concat(t)})}}};t.default=a}).call(this,a("543d")["default"])},f4e4:function(e,t,a){"use strict";(function(e){a("d37c");n(a("66fd"));var t=n(a("9bf2"));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=a,e(t.default)}).call(this,a("543d")["createPage"])},fcfc9:function(e,t,a){"use strict";var n=a("a0b5"),o=a.n(n);o.a}},[["f4e4","common/runtime","common/vendor"]]]);