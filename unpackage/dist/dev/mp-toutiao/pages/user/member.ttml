<view class="content"><view class="headerBox"><block tt:if="{{userDetails}}"><view class="vipBox"><view class="user"><image class="avatar" src="{{userDetails.avatar_url}}" mode="widthFix"></image><view class="nameBox"><view class="nickname">{{userDetails.cname}}</view><block tt:if="{{shopData.level_type=='score'}}"><view class="totle">{{"累计获得"+userDetails.total_score+"分"}}</view></block><block tt:if="{{shopData.level_type=='money'}}"><view class="totle">{{"累计消费"+userDetails.total_money+"元"}}</view></block><block tt:if="{{shopData.level_type=='order'}}"><view class="totle">{{"累计购买"+userDetails.total_order+"次"}}</view></block></view></view><block tt:if="{{userDetails.level_id}}"><block><block tt:if="{{userDetails.id}}"><view class="tips"><view class="title">{{"当前等级为"+userDetails.level_title}}</view><block tt:if="{{userLevelList.length>0}}"><u-line-progress vue-id="abede5e0-1" active-color="#f8d4ad" percent="{{$root.m0}}" height="{{10}}" show-percent="{{false}}" striped="{{true}}" striped-active="{{true}}" bind:__l="__l"></u-line-progress></block><block tt:if="{{userDetails.level_time}}"><block><view class="text"><label class="_span">{{"有效期至："+userDetails.level_time}}</label><label class="_span">{{"享"+userDetails.discount/10+"折"}}</label></view></block></block><block tt:else><block><block tt:if="{{userLevelList.length>0&&nextLevelIdx+1<=userLevelList.length}}"><block><block tt:if="{{shopData.level_type=='score'}}"><view class="text"><label class="_span">{{"还差"+(userLevelList[nextLevelIdx+1].level_score-userDetails.total_score)+"分升级到"+userLevelList[nextLevelIdx+1].title}}</label><label class="_span">{{userLevelList[nextLevelIdx+1].level_score+"分"}}</label></view></block><block tt:if="{{shopData.level_type=='money'}}"><view class="text"><label class="_span">{{"还差"+(userLevelList[nextLevelIdx+1].level_money-userDetails.total_money)+"元升级到"+userLevelList[nextLevelIdx+1].title}}</label><label class="_span">{{userLevelList[nextLevelIdx+1].level_money+"元"}}</label></view></block><block tt:if="{{shopData.level_type=='order'}}"><view class="text"><label class="_span">{{"还差"+(userLevelList[nextLevelIdx+1].level_order-userDetails.total_order)+"单升级到"+userLevelList[nextLevelIdx+1].title}}</label><label class="_span">{{userLevelList[nextLevelIdx+1].level_order+"单"}}</label></view></block></block></block></block></block></view></block></block></block><block tt:else><block><view class="noneTips">非会员</view></block></block><icons class="bgImg" vue-id="abede5e0-2" type="vip" size="78" color="#fff" bind:__l="__l"></icons></view></block></view><view class="contentBox"><block tt:if="{{buyLevelList.length>0}}"><view class="bigBox"><view class="header" style="{{('color:'+template.color.color2)}}">购买会员</view><view class="hover"><block tt:for="{{buyLevelList}}" tt:for-item="item" tt:for-index="index" tt:key="index"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" data-event-params="{{({index})}}" class="{{(('label')+' '+(buyLevelActive===index?'active':''))}}" bindtap="__e"><view class="title" style="{{(buyLevelActive===index?'':'color:'+template.color.color3)}}">{{item.title}}</view><view class="text" style="{{(buyLevelActive===index?'':'color:'+template.color.color4)}}"><block tt:if="{{item.level_payday===30}}"><label class="_span">{{item.level_payment+"元/月"}}</label></block><block tt:else><block tt:if="{{item.level_payday===365}}"><label class="_span">{{item.level_payment+"元/年"}}</label></block><block tt:else><label class="_span">{{item.level_payment+"元/"+item.level_payday+"天"}}</label></block></block></view><view class="price" style="{{(buyLevelActive===index?'':'color:'+template.color.color4)}}"><label class="_span">¥</label>{{item.level_payment}}</view></view></block><block tt:if="{{buyLevelList.length%3===2}}"><view class="label" style="opacity:0;"></view></block></view><block tt:if="{{userDetails.level_id>buyLevelList[buyLevelActive].id}}"><block><view class="button none">{{"您已是"+userDetails.level_title+"，无需购买"}}</view></block></block><block tt:else><block tt:if="{{buyLevelList[buyLevelActive].level_payment===0}}"><block><view class="button none">无需购买，达到条件后自动升级</view></block></block><block tt:else><block tt:if="{{userDetails.level_id===buyLevelList[buyLevelActive].id}}"><block><view data-event-opts="{{[['tap',[['getBuyLevelTap']]]]}}" class="button none" bindtap="__e">{{"您已是"+userDetails.level_title+"，继续购买可续期"}}</view></block></block><block tt:else><block><view data-event-opts="{{[['tap',[['getBuyLevelTap']]]]}}" class="button" bindtap="__e">{{"立即支付"+buyLevelList[buyLevelActive].level_payment+"元，升级"+buyLevelList[buyLevelActive].title}}</view></block></block></block></block></view></block><block tt:else><view class="agentListBox"><view class="header" style="{{('color:'+template.color.color2)}}">会员成长体系</view><view class="menuBox"><view class="menu">级别名称</view><view class="menu">购物折扣</view><view class="menu"><block tt:if="{{shopData.level_type=='score'}}"><text>累计积分(分)</text></block><block tt:if="{{shopData.level_type=='money'}}"><text>累计消费(元)</text></block><block tt:if="{{shopData.level_type=='order'}}"><text>累计购买(次)</text></block></view></view><block tt:for="{{userLevelList}}" tt:for-item="item" tt:for-index="index" tt:key="index"><view class="listBox"><view class="list">{{item.title}}</view><view class="list">{{item.discount+"%"}}</view><view class="list"><block tt:if="{{shopData.level_type=='score'}}"><text>{{item.level_score}}</text></block><block tt:if="{{shopData.level_type=='money'}}"><text>{{item.level_money}}</text></block><block tt:if="{{shopData.level_type=='order'}}"><text>{{item.level_order}}</text></block></view></view></block><block tt:if="{{shopData.level_type=='score'}}"><view class="text">注：当累计积分达指定标准则自动成为该级别会员</view></block><block tt:if="{{shopData.level_type=='money'}}"><view class="text">注：当累计消费达指定标准则自动成为该级别会员</view></block><block tt:if="{{shopData.level_type=='order'}}"><view class="text">注：当累计购买次数达指定标准则自动成为该级别会员</view></block></view></block><block tt:if="{{currentLevel.interests_list.length>0}}"><view class="interestsBox"><view class="header" style="{{('color:'+template.color.color2)}}">会员权益</view><view class="listBox" style="{{('color:'+template.color.color2)}}"><block tt:for="{{currentLevel.interests_list}}" tt:for-item="item" tt:for-index="index" tt:key="index"><view class="list"><view class="image"><image src="{{item.icons}}" mode="widthFix"></image></view><view class="title">{{item.cname}}</view><view class="text">{{item.intro}}</view></view></block></view></view></block></view></view>